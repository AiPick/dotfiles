nnoremap j 3j
nnoremap k 3k
nnoremap H :back<CR>
nnoremap L :forward<CR>
nnoremap [t :tabprevious<CR>
nnoremap ]t :tabnext<CR>
nnoremap D :tabclose!<CR>
nnoremap <silent> f :silent !fcitx-remote -c<CR>f
nnoremap <silent> F :silent !fcitx-remote -c<CR>F
nnoremap <silent> : :silent !fcitx-remote -c<CR>:
nnoremap <silent> b :silent !fcitx-remote -c<CR>b
nnoremap <silent> t :silent !fcitx-remote -c<CR>t
nnoremap <silent> o :silent !fcitx-remote -c<CR>o
nnoremap <C-L> :set gui=navigation<CR><C-L>
nnoremap <Esc> <Esc>:set gui=nonavigation<CR>
nnoremap <C-Q> <C-W>
cnoremap <C-N> <Down>
cnoremap <C-P> <Up>

set hintchars=abcdefghijklmnopqrstuvwxyz
set suggestengines=''
set gui=nonavigation
set focuscontent
set wildmode=list:full
set noscrollbars
set animations
colorscheme indigo

javascript <<EOM
function toggle_flash() {
  var oldvar = options.getPref('plugin.state.flash');
  if (oldvar > 0)
    liberator.echo('flash-plugin disabled.');
  else
    liberator.echo('flash-plugin enabled.');
  options.setPref('plugin.state.flash', 2-oldvar);
}

function inbox_enable() {
  options.setPref('general.useragent.override',
    'Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 ' +
    '(KHTML, like Gecko) Chrome/39.0.2171.99 Safari/537.36');
  options.setPref('security.csp.enable', false);
}

function restore_from_inbox() {
 options.resetPref('general.useragent.override');
 options.setPref('security.csp.enable', true);
}

function execute_if_no_flash(command) {
  if (options.getPref('plugin.state.flash') == 0)
    liberator.execute(command);
}
EOM

autocmd!
autocmd LocationChange .* js restore_from_inbox()
autocmd LocationChange inbox\\.google\\.com js inbox_enable()
autocmd PageLoad v\\.youku\\.com js execute_if_no_flash('youplayer')
autocmd PageLoad www\\.bilibili\\.com/video/av js execute_if_no_flash('bilidan')

let g:smooziee_scroll_interval='20'
let g:plugin_loader_roots = '~/.vimperator/vimperator-plugins'
let g:plugin_loader_plugins = 'open-with,feedSomeKeys_3,tabsort,stylish,'
let g:plugin_loader_plugins .= 'goo.gl,_smooziee,caret-hint'
source ~/.vimperator/vimperator-plugins/_libly.js
source ~/.vimperator/vimperator-plugins/plugin_loader.js
nnoremap Y :googleUrlShortener<CR>
nnoremap v :caret select head<CR>

command! pin :set apptab
command! unpin :set noapptab
command! youplayer :openwith youplayer
command! bilidan :openwith bilidan
command! chrome :openwith chromium
command! flashtoggle :js toggle_flash()
nnoremap <C-F> :flashtoggle<CR>

fmaps -urls='feedly.com' j k <s-j> <s-k> n p o v r <s-m> gg ga
" vim:ts=4:sw=4:tw=0:ft=vim
